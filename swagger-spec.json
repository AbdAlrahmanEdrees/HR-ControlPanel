{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_sayHi","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/auth/local/signin":{"post":{"description":"Provide either **email** or **phone** to login.","operationId":"AuthController_signinLocal","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInDto"}}}},"responses":{"200":{"description":"Signin successful. Returns Tokens OR a Verification Object if email is not verified.","content":{"application/json":{"schema":{"oneOf":[{"properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"}}},{"properties":{"verificationId":{"type":"string","description":"User ID needed for OTP"},"message":{"type":"string"}}}]}}}},"400":{"description":"Validation failed (missing email/phone)"},"401":{"description":"Invalid Credentials (wrong email or password)"},"403":{"description":"Access Denied (User is banned)"}},"summary":"Sign in using email or phone","tags":["Auth"]}},"/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[{"name":"Authorization","in":"header","description":"Should be like this: 'Bearer access_token'","required":false,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"200":{"description":"Logged out successfully"},"401":{"description":"Unauthorized (expired access_token)"}},"tags":["Auth"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refreshTokens","parameters":[{"name":"Authorization","in":"header","description":"Should be like this: 'Bearer refresh_token'","required":false,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"200":{"description":"AccessToken was refreshed successfully"},"403":{"description":"User Should be Logged Out. not-exit || expired-RT || banned"}},"tags":["Auth"]}},"/auth/verify":{"post":{"operationId":"AuthController_verifyAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifingDto"}}}},"responses":{"403":{"description":"verification code wrong or expired"}},"tags":["Auth"]}},"/auth/resend-verification-code":{"post":{"operationId":"AuthController_resendVerificationCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserIdDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/request-reset-password":{"post":{"operationId":"AuthController_requestResetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserIdDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/reset-password":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/users":{"get":{"description":"Retrieves a list of users. If a search term is provided, it filters by name, email, or phone. IDs are checked for exact matches.","operationId":"UsersController_findAll","parameters":[{"name":"search","required":false,"in":"query","description":"Keyword to filter users. partial match for name/email/phone; exact match for ID.","schema":{"type":"string"}}],"responses":{"200":{"description":"The list of users has been successfully retrieved."},"403":{"description":"Forbidden. Requires SUPER_ADMIN role."},"500":{"description":"Internal server error."}},"security":[{"bearer":[]}],"summary":"Search or list users","tags":["Users"]},"post":{"description":"Creates a new user with a hashed password. Returns a success message.","operationId":"UsersController_addUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User successfully created.","content":{"application/json":{"schema":{"example":"user added successfully; But, email verification will be required in the first sign-in"}}}},"400":{"description":"Validation failed (e.g. invalid email format)."},"403":{"description":"Forbidden. Requires SUPER_ADMIN role."},"409":{"description":"Email or phone number already exists in the database."}},"security":[{"bearer":[]}],"summary":"Register a new user","tags":["Users"]}},"/users/{id}":{"delete":{"description":"Permanently removes a user record by their UUID.","operationId":"UsersController_deleteUser","parameters":[{"name":"id","required":true,"in":"path","description":"The UUID of the user to delete","schema":{"example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"204":{"description":"The user has been successfully deleted."},"400":{"description":"Invalid UUID format supplied."},"403":{"description":"Forbidden. Requires SUPER_ADMIN role."},"404":{"description":"User not found."}},"security":[{"bearer":[]}],"summary":"Delete a user","tags":["Users"]}},"/employees":{"get":{"description":"Retrieves a list of employees using pagination. Max limit per request is 100.","operationId":"EmployeesController_findAll","parameters":[{"name":"skip","required":false,"in":"query","description":"Number of records to skip (offset). Defaults to 0.","schema":{"example":0,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of records to retrieve (limit). Defaults to 10. Max is 100.","schema":{"example":10,"type":"number"}}],"responses":{"200":{"description":"The list of employees has been successfully retrieved."},"500":{"description":"Internal server error."}},"summary":"Get all employees (Paginated)","tags":["Employees"]}},"/employees/{id}":{"delete":{"description":"Restricted to SUPER_ADMIN.","operationId":"EmployeesController_deleteEmployee","parameters":[{"name":"id","required":true,"in":"path","description":"UUID of the employee","schema":{"type":"string"}}],"responses":{"204":{"description":"Employee deleted successfully."},"403":{"description":"Requires SUPER_ADMIN role."},"404":{"description":"Employee not found."}},"security":[{"bearer":[]}],"summary":"Delete an employee","tags":["Employees"]}}},"info":{"title":"Talabaty Backend Documentation","description":"Endpoints' description","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"SignInDto":{"type":"object","properties":{"email":{"type":"string","description":"Email of the user. Required if phone is not provided.","example":"user@example.com"},"phone":{"type":"string","description":"Phone of the user. Required if email is not provided.","examples":["+963 911111111","0911111111","911111111"]},"password":{"type":"string"}},"required":["password"]},"VerifingDto":{"type":"object","properties":{"userId":{"type":"string","description":"user's id","example":"eo8179-exlholr-slklkjl..."},"code":{"type":"number","description":"4 digits integer","example":"0000"}},"required":["userId","code"]},"UserIdDto":{"type":"object","properties":{"userId":{"type":"string"}},"required":["userId"]},"ResetPasswordDto":{"type":"object","properties":{"userId":{"type":"string","description":"user's id, to put extra protection to the endpoint!","example":"lkjlsdf-asdlkl-lkjli...."},"code":{"type":"number","description":"the verification-code sent to email","example":12345},"email":{"type":"string","description":"valid email, we added it also to put extra protection","example":"aaa@example.com"},"newPassword":{"type":"string"}},"required":["userId","code","email","newPassword"]},"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","example":"John Doe","description":"Full name of the user"},"email":{"type":"string","example":"john@example.com","description":"Unique email address"},"password":{"type":"string","example":"SecureP@ss123","description":"Password (min 6 characters)","minLength":6},"phone":{"type":"string","example":"+1234567890","description":"Phone number"},"role":{"type":"string","enum":["ADMIN","SUPER_ADMIN"],"example":"ADMIN","description":"User role"}},"required":["name","email","password"]}}}}